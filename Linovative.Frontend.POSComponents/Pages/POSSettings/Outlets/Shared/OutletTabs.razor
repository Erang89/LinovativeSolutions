@inject IAppNavigationService _nav;
@inject IApplicationStateService _state;
@inject IJsonLocalizer _loc

<MudTabs Outlined="true" @bind-ActivePanelIndex="@activeIndex">
    <MudTabPanel OnClick="@(() => Navigate(PageRoutes.PostManagement.PosSettings.Outlets.OutletList))" Text="@_loc.PosManagement("Menu.Outlets")" />
    <MudTabPanel OnClick="@(() => Navigate(PageRoutes.PostManagement.PosSettings.Outlets.WorkingShifts))" Text="@_loc.PosManagement("Menu.WorkingShifts")" />
    <MudTabPanel OnClick="@(() => Navigate(PageRoutes.PostManagement.PosSettings.Outlets.Table))" Text="@_loc.PosManagement("Menu.Tables")" />
</MudTabs>

<LinovativeGap />

@code {
    [Parameter]
    public Tabs? SelectedTab { get; set; }
    int activeIndex { get; set; }
    public enum Tabs
    {
        Outlets,
        WorkingShift,
        Tables
    }

  
    private bool _isInitialized = false;
    async Task Navigate(string navigateTo)
    {
         if (!_isInitialized)
        {
            _isInitialized = true;
            return;
        }
        _nav.NavigateTo(navigateTo);
    }


    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        activeIndex = SelectedTab switch
        {
            Tabs.Outlets => 0,
            Tabs.WorkingShift => 1,
            Tabs.Tables => 2,
            _ => 10
        };
        _state.OnChange += StateHasChanged;
       
    }

}
