@inject IJsonLocalizer _loc
@inject IAppNavigationService _nav
<div>

    @if (BackUrl is not null)
    {
        <MudButton @onclick="@(() => _nav.NavigateTo(BackUrl))"
                   Variant="Variant.Text"
                   StartIcon="@Icons.Material.Filled.ArrowBack"
                   Class="me-2"
                   Color="Color.Primary">@_loc.Global("Button.Back")</MudButton>
    }

    @if (PageMode == PageModes.List)
    {
        <MudButton @onclick="OnAddNew"
                   Variant="ComponentSettings.AddNewButtonVariant"
                   StartIcon="@Icons.Material.Filled.Add"
                   Color="Color.Primary">@_loc.Global("Button.AddNew")</MudButton>
    }


    @if (PageMode == PageModes.List && SelectedItemCount > 0)
    {
        <MudButton @onclick="@(OnDelete)"
                   Variant="ComponentSettings.DeleteButtonVariant"
                   StartIcon="@Icons.Material.Filled.Delete"
                   Class="ms-1"
                   Color="Color.Error">@_loc.Global("Button.Delete")</MudButton>
    }


    @if (PageMode == PageModes.Create || PageMode == PageModes.Update)
    {
        <MudButton @onclick="OnSave"
                   Variant="ComponentSettings.SaveButtonVariant"
                   Disabled="@IsFormSubmitting"
                   StartIcon="@Icons.Material.Filled.Save"
                   Color="Color.Primary">@_loc.Global("Button.Save")</MudButton>

        <MudButton @onclick="@(OnCancel)"
                   Disabled="@IsFormSubmitting"
                   Class="ms-1"
                   Variant="ComponentSettings.CancelButtonVariant"
                   StartIcon="@Icons.Material.Filled.Cancel"
                   Color="Color.Default">@_loc.Global("Button.Cancel")</MudButton>
    }

    @ChildContent

</div>

@code {
    [Parameter] public string? BackUrl { get; set; }
    [Parameter] public PageModes? PageMode { get; set; } = PageModes.List;
    [Parameter] public EventCallback OnAddNew { get; set; }
    [Parameter] public EventCallback OnDelete { get; set; }
    [Parameter] public EventCallback OnSave { get; set; }
    [Parameter] public EventCallback OnCancel { get; set; }
    [Parameter] public int SelectedItemCount { get; set; }
    [Parameter] public bool IsFormSubmitting { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
}
